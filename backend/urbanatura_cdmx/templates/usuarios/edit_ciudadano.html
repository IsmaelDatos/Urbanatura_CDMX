{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/login.css' %}">
{% endblock %}

{% block content %}
<div class="edit-profile-container">
  <div class="edit-profile-card">
    <!-- Cabecera -->
    <div class="edit-profile-header">
      <h1>Editar Perfil</h1>
    </div>

    <!-- Formulario -->
    <form method="POST" class="edit-profile-form">
      {% csrf_token %}

      {# Mensajes flash #}
      {% if messages %}
      <div class="mb-6">
        {% for message in messages %}
        <div class="alert {% if message.tags == 'error' %}alert-error{% else %}alert-success{% endif %}">
          {{ message }}
        </div>
        {% endfor %}
      </div>
      {% endif %}

      <!-- Información personal -->
      <div class="form-section">
        <h2><i class="fas fa-user"></i> Información Personal</h2>

        <div class="form-grid">
          <div class="form-group">
            <label for="first_name">Nombre *</label>
            <input id="first_name" name="first_name" type="text"
                   class="form-control"
                   value="{{ form.first_name.value }}">
          </div>

          <div class="form-group">
            <label for="primer_apellido">Primer Apellido *</label>
            <input id="primer_apellido" name="primer_apellido" type="text"
                   class="form-control"
                   value="{{ form.primer_apellido.value }}">
          </div>
        </div>

        <div class="form-group">
          <label for="segundo_apellido">Segundo Apellido</label>
          <input id="segundo_apellido" name="segundo_apellido" type="text"
                 class="form-control"
                 value="{{ form.segundo_apellido.value }}">
        </div>

        <div class="form-group">
          <label for="telefono">Teléfono</label>
          <input id="telefono" name="telefono" type="text"
                 class="form-control"
                 value="{{ form.telefono.value }}">
        </div>
      </div>

      <!-- Dirección -->
      <div class="form-section">
        <h2><i class="fas fa-map-marker-alt"></i> Dirección</h2>

        <div class="form-grid">
          <div class="form-group">
            <label for="calle">Calle *</label>
            <input id="calle" name="calle" type="text"
                   class="form-control"
                   value="{{ form.calle.value }}">
          </div>

          <div class="form-group">
            <label for="num_ext">Número Ext. *</label>
            <input id="num_ext" name="num_ext" type="text"
                   class="form-control"
                   value="{{ form.num_ext.value }}">
          </div>
        </div>

        <div class="form-group">
          <label for="num_int">Número Int.</label>
          <input id="num_int" name="num_int" type="text"
                 class="form-control"
                 value="{{ form.num_int.value }}">
        </div>

        <div class="form-grid">
          <div class="form-group">
            <label for="municipio">Alcaldía/Municipio *</label>
            <input id="municipio" name="municipio" type="text"
                   class="form-control"
                   value="{{ form.municipio.value }}">
          </div>

          <div class="form-group">
            <label for="codigo_postal">Código Postal *</label>
            <input id="codigo_postal" name="codigo_postal" type="text"
                   class="form-control"
                   value="{{ form.codigo_postal.value }}">
          </div>
        </div>

        <div class="form-group">
          <label for="referencias">Referencias</label>
          <textarea id="referencias" name="referencias" rows="3"
                    class="form-control">{{ form.referencias.value }}</textarea>
        </div>
      </div>

      <!-- Botones -->
      <div class="form-actions">
        <a href="{% url 'home_ciudadano' %}" class="btn btn-secondary">
          Cancelar
        </a>
        <button type="submit" class="btn btn-primary">
          Guardar Cambios
        </button>
      </div>
    </form>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/edit_profile.js' %}"></script>
{% endblock %}